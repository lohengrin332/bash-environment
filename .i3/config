# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:monospace 12

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesnâ€™t scale on retina/hidpi displays.

# Set outline color for tab on unfocused window
# class                     border   backgr. text    indic.  child_border
#client.focused              #4c7899 #285577 #ffffff #2e9ef4 #285577
client.focused              #222222 #285577 #ffffff #2e9ef4 #285577
#client.focused_inactive     #333333 #5f676a #ffffff #484e50 #5f676a
#client.unfocused            #333333 #222222 #888888 #292d2e #222222
client.unfocused            #666666 #222222 #888888 #292d2e #222222

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# %%hotkey: show this help %%
# $mod+/
bindsym $mod+slash exec ~/code/bash-env/scripts/dmenu_hotkeys.py i3

# %%hotkey: start a terminal %%
bindsym $mod+Return exec i3-sensible-terminal

# %%hotkey: kill focused window %%
bindsym $mod+q kill
# %%hotkey: kill focused window %%
bindsym $mod+Shift+q kill

# %%hotkey: start dmenu (search for installed apps) %%
bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# toggle to/from a given workspace by pressing the shortcut for that workspace twice
workspace_auto_back_and_forth yes

# %%hotkey: change focus left %%
# $mod+{Left,Down,Up,Right}
bindsym $mod+Left  focus left
bindsym $mod+Down  focus down
bindsym $mod+Up    focus up
bindsym $mod+Right focus right

# %%hotkey: move focused window %%
# $mod+Shift+{Left,Down,Up,Right}
bindsym $mod+Shift+Left  move left
bindsym $mod+Shift+Down  move down
bindsym $mod+Shift+Up    move up
bindsym $mod+Shift+Right move right

# %%hotkey: split in horizontal orientation %%
bindsym $mod+Shift+backslash split h

# %%hotkey: split in vertical orientation %%
bindsym $mod+minus split v

# %%hotkey: enter fullscreen mode for the focused container %%
bindsym $mod+f fullscreen toggle

# %%hotkey: change container layout (stacked, tabbed, toggle split) %%
# $mod+{s,w,e}
# %%hotkey: change to split container layout %%
bindsym $mod+e layout toggle split
# %%hotkey: change to stacking container layout %%
bindsym $mod+s layout stacking
# %%hotkey: change to tabbed container layout %%
bindsym $mod+w layout tabbed

# %%hotkey: toggle tiling / floating %%
bindsym $mod+Shift+space floating toggle

# %%hotkey: change focus between tiling / floating windows %%
bindsym $mod+space focus mode_toggle

# %%hotkey: focus the parent container %%
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# %%hotkey: switch to the internal monitor, disable external %%
bindsym $mod+Shift+h exec ~/.screenlayout/undocked.sh

# %%hotkey: move the current workspace to the built-in laptop screen %%
bindsym $mod+h move workspace to output eDP-1

# %%hotkey: move the current workspace to the next screen to the right, with looping %%
bindsym $mod+m move workspace to output right
# %%hotkey: move the current workspace to the next screen above, with looping %%
bindsym $mod+Shift+m move workspace to output up

# workspaces
set $workspace0 "0"
set $workspace1 "1"
set $workspace2 "2"
set $workspace3 "3 Zoom"
set $workspace4 "4"
set $workspace5 "5"
set $workspace6 "6"
set $workspace7 "7 IntelliJ"
set $workspace8 "8 ï†¼"
set $workspace9 "9 ï‚†"
set $workspaceG "ðŸŽ®"

# %%hotkey: switch to workspace 0-9 %%
# $mod+{0,1,2,3,4,5,6,7,8,9,g}
bindsym $mod+0 workspace $workspace0
bindsym $mod+1 workspace $workspace1
bindsym $mod+2 workspace $workspace2
bindsym $mod+3 workspace $workspace3
bindsym $mod+4 workspace $workspace4
bindsym $mod+5 workspace $workspace5
bindsym $mod+6 workspace $workspace6
bindsym $mod+7 workspace $workspace7
bindsym $mod+8 workspace $workspace8
bindsym $mod+9 workspace $workspace9
bindsym $mod+g workspace $workspaceg

# %%hotkey: move focused container to workspace 0-9 %%
# $mod+Shift+{0,1,2,3,4,5,6,7,8,9}
bindsym $mod+Shift+0 move container to workspace $workspace0
bindsym $mod+Shift+1 move container to workspace $workspace1
bindsym $mod+Shift+2 move container to workspace $workspace2
bindsym $mod+Shift+3 move container to workspace $workspace3
bindsym $mod+Shift+4 move container to workspace $workspace4
bindsym $mod+Shift+5 move container to workspace $workspace5
bindsym $mod+Shift+6 move container to workspace $workspace6
bindsym $mod+Shift+7 move container to workspace $workspace7
bindsym $mod+Shift+8 move container to workspace $workspace8
bindsym $mod+Shift+9 move container to workspace $workspace9
bindsym $mod+Shift+g move container to workspace $workspaceg

# %%hotkey: reload the configuration file %%
bindsym $mod+Shift+c reload
# %%hotkey: restart i3 inplace (preserves your layout/session, can be used to upgrade i3) %%
bindsym $mod+Shift+r restart
# %%hotkey: exit i3 (logs you out of your X session) %%
bindsym $mod+x exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

mode "resize" {
        # %%hotkey: Pressing left in resize mode will shrink the windowâ€™s width. %%
        bindsym Left resize shrink width 10 px or 10 ppt
        # %%hotkey: Pressing shift+left in resize mode will shrink the windowâ€™s width a small amount. %%
        bindsym Shift+Left resize shrink width 1 px or 1 ppt

        # %%hotkey: Pressing down in resize mode will grow the windowâ€™s height. %%
        bindsym Down resize grow height 10 px or 10 ppt
        # %%hotkey: Pressing shift+down in resize mode will grow the windowâ€™s height a small amount. %%
        bindsym Shift+Down resize grow height 1 px or 1 ppt

        # %%hotkey: Pressing up in resize mode will shrink the windowâ€™s height. %%
        bindsym Up resize shrink height 10 px or 10 ppt
        # %%hotkey: Pressing shift+up in resize mode will shrink the windowâ€™s height a small amount. %%
        bindsym Shift+Up resize shrink width 1 px or 1 ppt

        # %%hotkey: Pressing right in resize mode will grow the windowâ€™s height. %%
        bindsym Right resize grow width 10 px or 10 ppt
        # %%hotkey: Pressing shift+right in resize mode will grow the windowâ€™s height a small amount. %%
        bindsym Shift+Right resize grow width 1 px or 1 ppt

        # %%hotkey: pressing Enter or Escape in resize mode will return to normal mode %%
        bindsym Return mode "default"
        bindsym Escape mode "default"
}
# %%hotkey: resize window (you can also use the mouse for that) %%
bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
        id bar-0
        font pango:monospace 8
        status_command i3status --config ~/.i3/i3status.conf
        # status_command /bin/date "+%Y-%m-%d %H:%M:%S"
}

######### my custom stuff #########
# Prereqs:
        # sudo snap install slack --classic
        # sudo snap install spotify
        # sudo snap install pocket-casts
        # sudo snap install --classic intellij-idea-ultimate
        # sudo snap install --edge android-messages-desktop
        # sudo apt-get install i3
        # sudo apt-get install playerctl  # might need to manually build/install this
        # sudo apt-get install feh  # to set wallpaper
        # sudo apt-get install arandr  # to generate multiple monitor config(s), might already be installed
        # sudo apt-get install fonts-font-awesome
        # sudo apt-get install exuberant-ctags
        # sudo apt-get install network-manager-gnome  # Not totally sure this one is necessary
        # sudo apt-get install blueman-applet
        # sudo apt-get install gnome-calculator
        # Install pasystray from https://github.com/christophgysin/pasystray
# disable touchpad while typing
exec --no-startup-id syndaemon -K -i 0.5 -R -d

# %%hotkey: mark the current window as the sidebar application %%
bindsym $mod+b mark sidebar

# %%hotkey: move sidebar window to scratchpad %%
bindsym $mod+Shift+apostrophe exec "i3-msg '[con_mark=sidebar] move scratchpad'"

# %%hotkey: show the sidebar window %%
bindsym $mod+apostrophe exec "i3-msg '[con_mark=sidebar] floating enable; [con_mark=sidebar] scratchpad show; [con_mark=sidebar] floating disable; [con_mark=sidebar] move container to workspace current; [con_mark=sidebar] move right; [con_mark=sidebar] resize shrink width 30px or 30ppt; [con_mark=sidebar] focus'"

# %%hotkey: toggle current window to/from PIP mode %%
bindsym $mod+p exec "i3-msg 'floating toggle; sticky toggle; resize shrink width 10000px; resize grow width 500px; resize shrink height 10000px; resize grow height 250px;move position 10px 10px;'"

# %%hotkey: new console in PIP mode %%
bindsym $mod+Shift+p exec gnome-terminal -e "~/code/bash-env/scripts/i3pip-console.sh" # --zoom 0.7
mode "relocate_pip" {
        bindsym Left move left 20px
        bindsym Shift+Left move left 200px

        bindsym Down move down 20px
        bindsym Shift+Down move down 200px

        bindsym Up move up 20px
        bindsym Shift+Up move up 200px

        bindsym Right move right 20px
        bindsym Shift+Right move right 200px

        bindsym 0 move container to workspace $workspace0; [con_mark="pip"] focus
        bindsym 1 move container to workspace $workspace1; [con_mark="pip"] focus
        bindsym 2 move container to workspace $workspace2; [con_mark="pip"] focus
        bindsym 3 move container to workspace $workspace3; [con_mark="pip"] focus
        bindsym 4 move container to workspace $workspace4; [con_mark="pip"] focus
        bindsym 5 move container to workspace $workspace5; [con_mark="pip"] focus
        bindsym 6 move container to workspace $workspace6; [con_mark="pip"] focus
        bindsym 7 move container to workspace $workspace7; [con_mark="pip"] focus
        bindsym 8 move container to workspace $workspace8; [con_mark="pip"] focus
        bindsym 9 move container to workspace $workspace9; [con_mark="pip"] focus
        bindsym g move container to workspace $workspaceg; [con_mark="pip"] focus

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
# %%hotkey: enter relocate_pip mode %%
bindsym $mod+Control+p [con_mark="pip"] focus; mode "relocate_pip";

# %%hotkey: lock screen with keystroke %%
bindsym $mod+l exec ~/code/bash-env/scripts/i3lock.sh
# lock screen automatically after 20 minutes
exec --no-startup-id xautolock -time 20 -locker "~/code/bash-env/scripts/i3lock.sh"

# default workspaces for certain applications.
# Use `xprop` to identify window information.
for_window [class="Spotify"] move to workspace $workspace8
for_window [class="Google-chrome" title="Podcast Web Player "] move to workspace $workspace8
for_window [class="pocket-casts" title="Podcast Web Player "] move to workspace $workspace8
assign [class="Slack"] $workspace9
for_window [class="Google-chrome" title="Google Hangouts"] move to workspace $workspace9
# assign [class="jetbrains-idea"] $workspace7
assign [class="zoom"] $workspace3
for_window [class="jetbrains-idea" title="Comparison Failure "] move to workspace $workspace1
for_window [class="Google-chrome" instance=".*IntelliJIdea.*"] move to workspace $workspace1
for_window [class="Gnome-calculator"] floating enable move position center

# %%hotkey: open the calculator app %%
bindsym $mod+c exec /usr/bin/gnome-calculator

# %%hotkey: pause notifications %%
bindsym $mod+n exec notify-send "Pausing notifications"; exec sleep 5 && notify-send "DUNST_COMMAND_PAUSE"

# %%hotkey: resume notifications %%
bindsym $mod+shift+n exec notify-send "DUNST_COMMAND_RESUME"; exec notify-send "Resuming notifications"

set $audio_out "alsa_output.pci-0000_00_1f.3.analog-stereo"
set $audio_in "alsa_input.pci-0000_00_1f.3.analog-stereo"

# Media Player Controls
# For now, see current mute/volume status for the mic in `pavucontrol`
mode "manage_audio" {
        # %%hotkey: Pressing h in manage_audio mode will enter manage_headphone_audio mode. %%
        bindsym h mode "manage_headphone_audio"
        # %%hotkey: Pressing m in manage_audio mode will enter manage_mic_audio mode. %%
        bindsym m mode "manage_mic_audio"

        # %%hotkey: Pressing a in manage_audio mode will mute inputs and outputs. %%
        bindsym a \
                exec --no-startup-id pactl set-sink-mute $audio_out 1 ; \
                exec --no-startup-id pactl set-source-mute $audio_in 1

        # %%hotkey: Pressing A (shift+a) in manage_audio mode will unmute inputs and outputs. %%
        bindsym shift+a \
                exec --no-startup-id pactl set-sink-mute $audio_out 0 ; \
                exec --no-startup-id pactl set-source-mute $audio_in 0

        # %%hotkey: Pressing v in manage_audio mode will open `pavucontrol`. %%
        bindsym v \
                mode "default" ; \
                exec --no-startup-id /usr/bin/pavucontrol

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "manage_headphone_audio" {
        # %%hotkey: Pressing + (shift+=) in manage_headphone_audio mode will raise system volume. %%
        bindsym shift+equal exec --no-startup-id pactl set-sink-volume $audio_out "+1%"
        # %%hotkey: Pressing - in manage_headphone_audio mode will lower system volume. %%
        bindsym minus exec --no-startup-id pactl set-sink-volume $audio_out "-1%"
        # %%hotkey: Pressing = in manage_headphone_audio mode will toggle output mute. %%
        bindsym equal exec --no-startup-id pactl set-sink-mute $audio_out toggle

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "manage_mic_audio" {
        # %%hotkey: Pressing + (shift+=) in manage_mic_audio mode will raise system volume. %%
        bindsym shift+equal exec --no-startup-id pactl set-source-volume $audio_in "+1%"
        # %%hotkey: Pressing - in manage_mic_audio mode will lower system volume. %%
        bindsym minus exec --no-startup-id pactl set-source-volume $audio_in "-1%"
        # %%hotkey: Pressing = in manage_mic_audio mode will toggle output mute. %%
        bindsym equal exec --no-startup-id pactl set-source-mute $audio_in toggle

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# %%hotkey: manage system volume(s) %%
bindsym $mod+shift+a mode "manage_audio"

# %%hotkey: screen shot %%
bindsym $mod+Print exec --no-startup-id /usr/bin/xfce4-screenshooter

## start applications by default
# Set the background wallpaper
exec_always /usr/bin/feh --bg-scale ~/Pictures/wallpaper.png
# music
exec spotify
# chat/im
exec slack
# network configuration
exec --no-startup-id nm-applet
# audio configuration
exec --no-startup-id pasystray
